pipeline {
    agent any
    
    stages {
	stage('createVolumes') {
	    steps {
		sh 'docker volume create wolWejsciowy'
		sh 'docker volume create wolWyjsciowy'
	    }
	}
	stage('getIrssi') {
	    steps {
		sh 'docker build -t getirssi . -f ITE/GCL04/SK403390/Lab05/DockerfileGetIrssi'
		sh 'docker run --rm getirssi'
	    }
	}
        stage('build') {
            steps {
                sh 'docker build -t buildirssi . -f ITE/GCL04/SK403390/Lab05/DockerfileBuild'
		sh 'docker run buildirssi'
            }
        }
        stage('test') {
            steps {
                sh 'docker build -t testirssi . -f ITE/GCL04/SK403390/Lab05/DockerfileTest'
		sh 'docker run testirssi'
            }
        }
    }
}
