pipeline {
	agent any
    parameters {
        string(name: 'BRANCH', defaultValue: 'master', description: '')

        }
  	stages {
            stage("Clone"){
                steps {
                sh 'docker container prune -f'
                sh 'docker volume prune -f'
                sh 'docker volume  create --name repo_vol'
                sh 'docker volume  create --name build_vol'
                sh "docker build -t deltachatclone . -f ITE/GCL06/JP300987/Lab05/dockerfile_clone"
                sh "docker run -e BRANCH=${BRANCH} -v repo_vol:/deltachat-desktop deltachat"
                    }
                }
            
        }
}
