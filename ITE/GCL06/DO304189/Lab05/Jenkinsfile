pipeline 
{
    agent any
    stages
     {
        stage('Build') 
        {
            steps 
            {
               sh 'docker container prune -f'
               sh 'docker volume prune -f' 
               sh 'docker volume  create --name node_vol_in'
               sh 'docker volume  create --name node_vol_out'
               sh 'docker build . -f ./ITE/GCL06/DO304189/Lab05/dockerfile_build -t nodered_build'
               sh 'docker run -v node_vol_in:/node-red nodered_build'
            }
        }

         stage('Test') 
        {
            steps 
            {
              sh 'docker build . -f ./ITE/GCL06/DO304189/Lab05/dockerfile_test -t nodered_test'
            }
        }

        stage('Deploy')
        {
            steps
            { 
              sh 'docker build . -f ./ITE/GCL04/DO304189/Lab05/dockerfile_deploy -t nodered_deploy'
            }
        }

        stage('Publish')
        {
            steps
            {

            }
        }
    }
}