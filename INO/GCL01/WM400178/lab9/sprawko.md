Wiktor Młynarczyk - lab9

1. Najpierw zainstalowałem Fedore, skonfigurowałem użytkowników, sieć, itd:
## ![Alt text](1-instalacja.PNG?raw=true)
## ![Alt text](2-instalacja.PNG?raw=true)
## ![Alt text](3-root.PNG?raw=true)
2. Następnie zainstalowałem drugą maszyne, która ma pełnić rolę serwera:
## ![Alt text](4-dwa_maszyny.PNG?raw=true)
3. Aby druga fedora mogła pełnić rolę serwera, musiałem zainstalować na niej pakiet Apache

Komendy, jakie są do tego koniecznie:
```
sudo dnf install httpd 
sudo dnf group install "Web Server"
sudo systemctl start httpd
sudo systemctl enable httpd
sudo firewall-cmd --add-service=http --add-service=https --permanen
```
Dzięki nim, fedora pełni rolę serwera, ustawiliśmy firewalla, możemy teraz komunikować się po http
Przykładowy screen z procesu instalacji:

## ![Alt text](7-start-http.PNG?raw=true)

4. Po powyższej instalacji, w naszej fedorze utworzyła się odpowiednia scieżka, która umożliwia nam umieszczenia tam plików, które chcemy transferować.

Połączyłem się za pomocą SSH do serwera i wrzuciłem tam artefakt z Pipeline:

## ![Alt text](7-start-http.PNG?raw=true)
## ![Alt text](9-jarka-na-serwie.PNG?raw=true)
5. Utworzyłem odpowiedni podfolder **source**, w którym umieściłem artefakt. Dla testu odpaliłem z poziomu windowsa przeglądarke i wpisałem adres mojego serwera:

## ![Alt text](10-jarka-na-serwie.PNG?raw=true)

6. Dla potwierdzenia, że serwer naprawdę działa pokażę pobieranie artefaktu za pomocą wget:

## ![Alt text](11-pobieranie-wget.PNG?raw=true)

7. Przeszedłem następnie do drugiej części zadania, czyli wyciągnąłem poprzez ssh plik `anaconda-ks.cfg`. Odpowiednio go skonfigurowałem - według własnych potrzeb. doinstalowałem npm oraz wget, tak żebyśmy w sekcji post mogli pobrać artefakt z serwera HTTP:
```
# Generated by Anaconda 36.16.2
# Generated by pykickstart v3.36
#version=F36
# Use graphical install
#graphical
text

# Keyboard layouts
keyboard --vckeymap=pl-legacy --xlayouts='pl (legacy)','us'
# System language
lang en_US.UTF-8 --addsupport=pl_PL.UTF-8

# Network information
network  --bootproto=dhcp --device=enp0s3 --ipv6=auto --activate

# Repo
url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-$releasever&arch=x86_64 
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f$releasever&arch=x86_64


%packages
@^minimal-environment
npm*
wget
%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.4.3
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --none --initlabel

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted $y$j9T$Va9Ac6.7aKEnQTaNbt9vkIZ.$H/Alu0fGNzbnrq3qd2gcKNXsRyzeLx5SWYQTXSx5z46


%post
mkdir final_artifact
cd final_artifact
wget http://192.168.0.74/source/nodejs.tar.xz
ls
%end
```
8. Nastpęnie przeszedłem do najbardziej uciążliwej części, czyli niestandardowej instalacji Fedory, poprzez wcześniej wspomniany plik anaconda. Problemem było to, że nie mogłem ustalić wspólnego schowka dla wirutalnej masyzny oraz hosta, przez co musiałem wpisywać lokację mojego pliku anaconda-ks.cfg ręcznie, co zajmowało dużo czasu, i wielokrotnie się pomyliłem:
``https://raw.githubusercontent.com/InzynieriaOprogramowaniaAGH/MDO2022_S/WM400178/INO/GCL01/WM400178/lab9/anaconda-ks.cfg``
9. Przeszedłem do instalacji Fedory:
## ![Alt text](fedoraaa.PNG?raw=true)

## ![Alt text](14-complete.PNG?raw=true)
Przechodząc teraz do nowego serwera mamy scieżke:
## ![Alt text](15-potw.PNG?raw=true)

