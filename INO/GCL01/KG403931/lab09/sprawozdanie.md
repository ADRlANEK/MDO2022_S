### Przygotowujemy maszynę
![](<./Zrzut ekranu 2022-05-22 201427.jpg>)  
![](<./Zrzut ekranu 2022-05-22 201541.jpg>)  
### Instalujemy system
- uruchamiamy system, wybieramy opcję `Install Fedora`
- wyberamy języki
![](<./Zrzut ekranu 2022-05-22 201703.jpg>)  
- poniewaz jestesmy polakami z polski dodajemy polska klawiature
![](<./Zrzut ekranu 2022-05-22 201859.jpg>)  
- ustawiamy partycjonowanie ale nie jest jakies turbo wazne wiec dajemy auto
![](<./Zrzut ekranu 2022-05-22 201859.jpg>)  
- zmieniamy instalowane pakiety na minimum 
![](<./Zrzut ekranu 2022-05-22 202027.jpg>)
- dodajemy konto roota i usera
![](<./Zrzut ekranu 2022-05-22 202136.jpg>)  
![](<./Zrzut ekranu 2022-05-22 202320.jpg>)  
- po tak wspaniałych ustawieniach pozwalamy linuxowi pochłonąć powierzchnię dyskową
![](<./Zrzut ekranu 2022-05-22 202338.jpg>)  
- tzw. pora na szluge
![](<./Zrzut ekranu 2022-05-22 202416.jpg>)  
![](<./Zrzut ekranu 2022-05-22 203029.jpg>)  
- uruchamiamy ponownie i znajdujemy potężny plik do autoinstalacji 👏
![](<./Zrzut ekranu 2022-05-22 203340.jpg>)  
### Realizujemy przygotowanie do instalacji nienadzorowanej
- kopiujemy do hosta w celu posiadania go w jakims normalnym miejscu, tam sobie go edytuję i wystawiam na gitencjusza zeby miec do niego dostep z instalataora
![](<./Zrzut ekranu 2022-05-22 203943.jpg>)  
![](<./Zrzut ekranu 2022-05-22 204117.jpg>)  
- ustawiamy odpowiednie wartości i potrzeby w pliku do autoinstalacji (kickstart)
- **KONIECZNIE** sprawdzić, czy plik ma newline w postaci unixowej \n a nie windowsowskiej \r\n bo będzie się inaczej działa magia i system sie nie zainstaluje 🥺
- warto zauważyć, że fedora jest jedynym chyba linuxem, który nawet w wersji minimal będzie blokował każde zapytanie z zewnątrz firewallD i odkrycie tego zajęło mi chyba z godzinę 🤏
![](<./Zrzut ekranu 2022-05-23 200323.jpg>)  
```bash
# Generated by Anaconda 36.16.2
# Generated by pykickstart v3.36
#version=F36
# Use graphical install ## comment makes it go away
# graphical
text

# Keyboard layouts
keyboard --vckeymap=pl2 --xlayouts='pl','us'
# System language
lang en_US.UTF-8

#repos
url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-$releasever&arch=x86_64
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f$releasever&arch=x86_64

%packages
@^minimal-environment

tar
wget

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.4.3
ignoredisk --only-use=sda
autopart
# Partition clearing information
# clearpart --none --initlabel
clearpart --drives=sda --all

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted $y$j9T$2s9fflblDS.cT41qKv.IzW21$D7biVJnGYK2lf/o2gNuYxfjQzc.E8s8Ig/eOnRWtfr5
user --name=rat --password=$y$j9T$k/bcDyoNQSbzacuOY.IRolNV$tV6qUtE8o2NRdOCalhwzCYs2W732qtz8VzEXaw7Spx8 --iscrypted --gecos="rattus norvegicus"


%post

mkdir -p /var/www;cd /var/www
wget https://github.com/pause1/atari/releases/download/0.0.1/build.tar.gz
tar -xf build.tar.gz
mv vol_build/build/* .
rm -rf build.tar.gz vol_build/
sed -i -e 's|http://localhost/atari/server.php|http://atari.pause1.pl/server.php|' main.js
sed -i -e 's|<base href="/">|<base href="./">|' index.html
# instead of opening port 80 since i have no idea why firewalld wont do what its told to do - disabling firewall :)
systemctl stop firewalld

#adding service which will be starting server each time machine starts

echo "[Unit]
Description=atari http server
Documentation=man:SimpleHTTPServer(1)
After=network-online.target
[Service]
Type=simple
Restart=always
WorkingDirectory=/var/www
ExecStart=/usr/bin/python3 -m http.server 80
ExecStop=/bin/kill \"/bin/ps aux | /bin/grep SimpleHTTPServer | /bin/grep SimpleHTTPServer | /bin/grep -v grep | /usr/bin/awk '{ print $2 }'\"
[Install]
WantedBy=multi-user.target" >> /etc/systemd/system/atari.service

systemctl enable atari.service

%end

reboot
```
- mając nasz pliczek wystawiony na https://raw.githubusercontent.com/InzynieriaOprogramowaniaAGH/MDO2022_S/KG403931/INO/GCL01/KG403931/lab09/anaconda-ks.cfg próbujemy przeprowadzić instalację fedory
### Instalacja z automatu
Z ciekawostek - instalacja nie przechodziła dalej niż `saving storage configuration`, gdy przydzieliłem maszynie 512MB ram (po co linuxowi bez gui więcej 🤨), ale jak dałem 16GB to se leci dalej instalacja
![](<./Zrzut ekranu 2022-05-23 205356.jpg>)
![](<./Zrzut ekranu 2022-05-23 211512.jpg>)  
![](<./Zrzut ekranu 2022-05-23 213227.jpg>)  
![](<./Zrzut ekranu 2022-05-24 180245.jpg>)  
![](<./Zrzut ekranu 2022-05-24 180605.jpg>) 
### Sprawdzenie postinstalacji
System się prawidłowo zainstalował:
![](<./Zrzut ekranu 2022-05-24 180657.jpg>)  
![](<./Zrzut ekranu 2022-05-24 215135.jpg>)  
Wszystko gra.  
Łączenia ISO z plikiem nie robiłem, bo wymaga to albo pisania jakiś kolejnych skryptów i kombinowania z ich złożeniem w plik uruchamialny z poziomu BIOSu, albo edycji pliku ISO czego nie można zrobić w łatwy sposób.